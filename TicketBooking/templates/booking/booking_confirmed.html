{% extends "base.html" %}
{% block content %}


<div class="container d-flex justify-content-center align-items-center" style="min-height: 90vh;">

  <div class="ticket-card shadow-lg" style="width: 450px; border-radius: 14px; overflow: hidden; background: #fff;">

    <!-- Movie Poster -->
    <div style="height: 220px; overflow: hidden;">
      <img src="{{ booking.showtime.movie.poster_image.url }}" style="width: 100%; object-fit: cover;">
    </div>

    <!-- Ticket Body -->
    <div class="p-4">
      <h3 class="text-center mb-2">{{ booking.showtime.movie.title }}</h3>

      <p class="text-center text-success fw-bold mb-4" style="font-size: 18px;">
        ðŸŽ‰ Booking Confirmed!
      </p>

      <!-- Ticket Info -->
      <div class="mb-3">
        <div class="d-flex justify-content-between">
          <span class="fw-bold">Date:</span>
          <span>{{ booking.showtime.date }}</span>
        </div>
        <div class="d-flex justify-content-between">
          <span class="fw-bold">Time:</span>
          <span>{{ booking.showtime.start_time }}</span>
        </div>
        <div class="d-flex justify-content-between">
          <span class="fw-bold">Seats:</span>
          <span>
           {% for s in seat_list %}
            <span class="badge bg-primary me-1">{{ s }}</span>
           {% endfor %}

          </span>
        </div>
        <div class="d-flex justify-content-between">
          <span class="fw-bold">Screen:</span>
          <span>{{ booking.showtime.screen.name }}</span>
        </div>
      </div>

      <hr>

      <!-- Perforated Ticket Effect -->
      <div class="text-center my-3" style="border-top: 2px dashed #adb5bd; padding-top: 15px;">
        <img src="https://api.qrserver.com/v1/create-qr-code/?size=120x120&data={{ booking.booking_uuid }}" 
             alt="QR Code" class="mb-2" style="border-radius: 6px;">
        <p class="text-muted small">Scan at entry</p>
      </div>

      <hr>

      <!-- Bottom Info -->
      <div class="d-flex justify-content-between">
        <span class="fw-bold">Booking ID:</span>
        <span>{{ booking.booking_uuid }}</span>
      </div>

      <div class="d-flex justify-content-between">
        <span class="fw-bold">Booked On:</span>
        <span>{{ booking.booked_at|date:"M d, Y H:i" }}</span>
      </div>

      <a href="/" class="btn btn-success w-100 mt-4 py-2">Back to Home</a>

    </div>

  </div>

</div>

<style>
.ticket-card {
  animation: fadeIn 0.5s ease;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to   { opacity: 1; transform: translateY(0); }
}
</style>

{% endblock %}
